var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,r=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,s=(e,t)=>{for(var a in t||(t={}))i.call(t,a)&&r(e,a,t[a]);if(n)for(var a of n(t))o.call(t,a)&&r(e,a,t[a]);return e},l=(e,n)=>t(e,a(n));import{b as u,d as c,i as d,a as v,r as m,w as p,p as f,c as y,e as h,v as w,f as g,F as k,g as b,o as T,t as A,h as E,u as L,j as S,k as x,l as C,m as P,n as U,q as I,s as O,x as R,I as _,y as M,z,A as q,B as V,C as F,D as N,E as j,G as B,H as D,J as $,K as H,L as W,M as X,N as G,O as J,P as Y,Q as K,R as Q,S as Z,T as ee,U as te,V as ae,W as ne,X as ie}from"./vendor.24f3ac69.js";u({required:{e:-2,i:11,f:-3,o:-3,s:10.1,c:-2,samsung:7,vivaldi:1.2},insecure:!0});const oe=Symbol("api");function re(){const e=d(oe);if(void 0===e)throw new Error("api not found");return e}var se=v({name:"SelectAPI",setup(){const{baseUrls:e,currentBaseUrl:t}=re(),a=m(t);p((()=>{localStorage.getItem("api-url")!==a.value&&(localStorage.setItem("api-url",a.value),document.location.reload(!1))}));return{apiUrl:a,urls:e,prettyPrint:e=>{try{return new URL(e).hostname}catch(t){return e}}}}});f("data-v-986dc800");const le=["value"];function ue(e){return e instanceof Response?`Invalid response from the API: ${e.statusText} (${e.status})`:(console.error("unknwown error: ",e),"Unknown error from the API. Please check the console and network logs of your browser.")}y(),se.render=function(e,t,a,n,i,o){return h((T(),g("select",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.apiUrl=t),class:"select-api"},[(T(!0),g(k,null,b(e.urls,(t=>(T(),g("option",{key:t,value:t},A(e.prettyPrint(t)),9,le)))),128))],512)),[[w,e.apiUrl]])},se.__scopeId="data-v-986dc800";var ce=v({name:"SelectItems",setup(){const{api:e}=re(),t=m(!1),a=m(),n=m(),i=E((()=>{var e;return 401===(null==(e=a.value)?void 0:e.status)||!1})),o=L();return S((()=>{(async()=>{t.value=!0,a.value=void 0;try{n.value=await e.listItems({})}catch(i){a.value=i}finally{t.value=!1}})()})),{isLoading:t,isUnauthorized:i,items:n,error:a,formatResponseError:ue,updateUrl:function(e){const t=e.currentTarget.value;window.location.href="#/",setTimeout((()=>{o.push({name:"item",params:{id:t}}).then((()=>{window.location.reload()}))}),1e3)}}},data:()=>({key:""})});f("data-v-582362f8");const de={key:0,class:"loading"},ve={key:0,class:"items"},me=C("option",{value:"",disabled:"",selected:"",hidden:""}," Choose an item ",-1),pe=["value"];var fe,ye,he,we;y(),ce.render=function(e,t,a,n,i,o){const r=x("router-link");return T(),g("div",null,[e.isLoading?(T(),g("div",de," Loading... ")):(T(),g(k,{key:1},[e.isUnauthorized?P("",!0):(T(),g("div",ve,[h(C("select",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.key=t),class:"select-items",onChange:t[1]||(t[1]=(...t)=>e.updateUrl&&e.updateUrl(...t))},[me,(T(!0),g(k,null,b(e.items,(e=>(T(),g("option",{key:e.uuid,value:e.uuid},[U(r,{key:e.uuid,to:{name:"item",params:{id:e.uuid}}},{default:I((()=>[O(A(e.title),1)])),_:2},1032,["to"])],8,pe)))),128))],544),[[w,e.key]])]))],64))])},ce.__scopeId="data-v-582362f8",(ye=fe||(fe={}))[ye.Stop=0]="Stop",ye[ye.Play=1]="Play",ye[ye.Pause=2]="Pause",(we=he||(he={}))[we.TimeUpdate=0]="TimeUpdate",we[we.Seek=1]="Seek",we[we.Cursor=2]="Cursor";const ge=Symbol("audio-store");function ke(){const e=d(ge);if(void 0===e)throw new Error("store not found");return e}let be;var Te=v({name:"PlayerControls",components:{Icon:_},props:{stopped:{type:Boolean,required:!1}},setup(){S((()=>{window.addEventListener("keydown",v)})),M((()=>{window.removeEventListener("keydown",v),be&&(be.removeEventListener("ended",(()=>{n.value=!1})),be.removeEventListener("timeupdate",(()=>{u.value=p(be.currentTime.toFixed())})))}));const e=ke(),t=m(),a=m(),n=m(!1),i=m(!0),o=m(!1),r=m(!1),s=m(!0),l=m(!1),u=m("00:00"),c=m("/ 00:00");function d(){var e;s.value&&(s.value=!1,be=null==(e=document.querySelector(".audio"))?void 0:e.getElementsByTagName("audio")[0],be&&(isNaN(be.duration)&&"/ 00:00"!==c.value||(c.value="/ "+p(be.duration)))),!0===n.value?null==be||be.pause():null==be||be.play(),n.value=!n.value}function v(e){var n;(null==(n=e.target.parentElement)?void 0:n.classList.contains("field"))||32!==e.keyCode&&"32"!==e.code||e.target!==document.body&&e.target===a.value&&e.target===t.value||(e.preventDefault(),d())}function p(e){let t=Math.floor(e/60);return t=t>=10?t:"0"+t,t+":"+(e=(e=Math.floor(e%60))>=10?e:"0"+e)}return setTimeout((()=>{var e;be=null==(e=document.querySelector(".audio"))?void 0:e.getElementsByTagName("audio")[0],be&&(be.addEventListener("ended",(()=>{n.value=!1})),be.addEventListener("timeupdate",(()=>{u.value=p(be.currentTime.toFixed())})),isNaN(be.duration)||(c.value="/ "+p(be.duration)))}),2e3),{slider:a,isPlaying:n,isVolumeOn:i,isVolumeSliderOpen:o,isPlayerMenuOpen:r,isFirstPlay:s,isLooping:l,currentTime:u,totalTime:c,handlePlayPause:d,handlePlayEnd:function(){be.currentTime=0},toggleLoop:function(){be&&(l.value=!l.value,be.loop=!be.loop)},toggleVolume:function(){var e;i.value=!i.value,i.value?be.volume=parseFloat(null==(e=a.value)?void 0:e.value):be.volume=0},toggleVolumeSlider:function(){var e;o.value=!o.value,i.value?be.volume=parseFloat(null==(e=a.value)?void 0:e.value):be.volume=0},setVolume:function(){var e;be.volume=parseFloat(null==(e=a.value)?void 0:e.value)},setPlaybackRate:function(t){const a=t.currentTarget.value;be.playbackRate=parseFloat(a),null==e||e.mutations.setPlayBackRate(parseFloat(a))}}},data:()=>({})});f("data-v-53abd5c8");const Ae={class:"player-controls"},Ee={id:"player-timecode"},Le={id:"player-time"},Se={id:"player-current-time"},xe={id:"player-total-time"},Ce={id:"player-menu"},Pe={key:0,id:"player-volume-slider"},Ue=[V('<option value="" disabled selected hidden data-v-53abd5c8> playback rate </option><option value="0.25" data-v-53abd5c8> 0.25 </option><option value="0.5" data-v-53abd5c8> 0.5 </option><option value="0.75" data-v-53abd5c8> 0.75 </option><option value="1.0" data-v-53abd5c8> 1.0 </option><option value="1.5" data-v-53abd5c8> 1.5 </option><option value="2.0" data-v-53abd5c8> 2.0 </option>',7)];y(),Te.render=function(e,t,a,n,i,o){const r=x("Icon");return T(),g(k,null,[C("div",Ae,[e.isPlaying?(T(),z(r,{key:1,id:"pause-icon",icon:"fad:pause",class:"player-icon",onClick:e.handlePlayPause},null,8,["onClick"])):(T(),z(r,{key:0,id:"play-icon",icon:"fad:play",class:"player-icon",onClick:e.handlePlayPause},null,8,["onClick"])),U(r,{id:"stop-icon",icon:"fad:backward",class:"player-icon",onClick:e.handlePlayEnd},null,8,["onClick"]),C("div",Ee,[C("p",Le,[C("span",Se,A(e.currentTime),1),C("span",xe,A(e.totalTime),1)])]),U(r,{icon:"fad:loop",class:q(["player-icon player-loop-icon",{"player-loop-on":e.isLooping}]),onClick:e.toggleLoop},null,8,["class","onClick"]),U(r,{icon:"el:volume-up",class:"player-icon volume-icon",onClick:t[0]||(t[0]=t=>e.isVolumeSliderOpen=!e.isVolumeSliderOpen)}),U(r,{icon:"fad:caret-down",class:q(["icon-caret icon-caret-down",{show:!e.isPlayerMenuOpen}]),onClick:t[1]||(t[1]=t=>e.isPlayerMenuOpen=!e.isPlayerMenuOpen)},null,8,["class"]),U(r,{icon:"fad:caret-up",class:q(["icon-caret icon-caret-up",{show:e.isPlayerMenuOpen}]),onClick:t[2]||(t[2]=t=>e.isPlayerMenuOpen=!e.isPlayerMenuOpen)},null,8,["class"])]),C("div",Ce,[e.isVolumeSliderOpen?(T(),g("div",Pe,[C("input",{ref:"slider",type:"range",min:"0",max:"1",step:"0.001",value:"1.0",onChange:t[3]||(t[3]=(...t)=>e.setVolume&&e.setVolume(...t))},null,544)])):P("",!0),e.isPlayerMenuOpen?(T(),g("select",{key:1,id:"player-playback-rate",ref:"playbackRateSelect",name:"playback-rate",onChange:t[4]||(t[4]=(...t)=>e.setPlaybackRate&&e.setPlaybackRate(...t))},Ue,544)):P("",!0)])],64)},Te.__scopeId="data-v-53abd5c8";var Ie=v({name:"App",components:{SelectAPI:se,SelectItems:ce,Icon:_,PlayerControls:Te},setup(){F(ge,function(){const e=R({playState:0,currentTime:{value:0,source:0},duration:0,playbackRate:1}),t={setPlayState(t){e.playState=t},setDuration(t){e.duration=t},setCurrentTime(t){e.currentTime=t},setPlayBackRate(t){e.playbackRate=t}},a={isReady:E((()=>0!==e.duration))};return{state:e,getters:a,mutations:t}}());const{api:e}=re(),{persistentToken:t}=re(),a=m(),n=m(),i=E((()=>{var e;return 401===(null==(e=a.value)?void 0:e.status)||!1}));S((()=>{(async()=>{a.value=void 0;try{n.value=await e.listItems({})}catch(t){a.value=t}})()}));return{isUnauthorized:i,isMenuOpen:m(!1),items:n,error:a,logout:function(){t.removeToken(),window.location.reload()}}}});f("data-v-6439c676");const Oe={class:"app"},Re={id:"header"},_e={id:"header-left"},Me=[C("path",{d:"M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"},null,-1)],ze={key:0,id:"menu-container"},qe=C("div",{id:"header-center"},[C("h2",{id:"header-title"},[C("a",{href:"/#"})])],-1),Ve={key:0,id:"header-right"};y(),Ie.render=function(e,t,a,n,i,o){const r=x("Icon"),s=x("SelectItems"),l=x("SelectAPI"),u=x("PlayerControls"),c=x("router-view");return T(),g("div",Oe,[C("div",Re,[C("div",_e,[U(r,{id:"header-icon",icon:"fad:h-expand",class:q({show:!e.isMenuOpen}),onClick:t[0]||(t[0]=t=>e.isMenuOpen=!e.isMenuOpen)},null,8,["class"]),(T(),g("svg",{id:"menu-close-icon",class:q({show:e.isMenuOpen}),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",onClick:t[1]||(t[1]=t=>e.isMenuOpen=!e.isMenuOpen)},Me,2)),e.isMenuOpen?(T(),g("div",ze,[U(s),U(l),e.isUnauthorized?P("",!0):(T(),g("button",{key:0,class:"logout",onClick:t[2]||(t[2]=(...t)=>e.logout&&e.logout(...t))}," Logout "))])):P("",!0)]),qe,e.isUnauthorized?P("",!0):(T(),g("div",Ve,[U(u)]))]),U(c)])},Ie.__scopeId="data-v-6439c676";var Fe=v({emits:["success"],setup(e,{emit:t}){const{rawApi:a,persistentToken:n,currentBaseUrl:i}=re(),o=m(!1),r=m({username:"",password:""}),s=m(void 0),l=E((()=>{if(s.value)return ue(s.value)})),u=E((()=>!!s.value&&401===s.value.status));const d=E((()=>`${i}/admin/login/`));return{submit:async function(){s.value=void 0,o.value=!0;try{const e=await a.createTokenObtainPair({tokenObtainPair:r.value});if(!e.access||!e.refresh)throw new Error("Unexpected empty token response: "+JSON.stringify(e));n.token=c.JWTToken.fromBase64(e.access,e.refresh),t("success"),setTimeout((()=>{window.location.reload()}),500)}catch(e){e instanceof Response&&(s.value=e),console.error(e)}o.value=!1},loading:o,input:r,apiError:s,errorFmt:l,isUnauthorized:u,loginUrl:d}}});f("data-v-7310a90a");const Ne=O(" Fill in your "),je=["href"],Be={class:"fields"},De={class:"submit"},$e={key:0,class:"error"},He={key:0},We={key:1},Xe={key:2};y(),Fe.render=function(e,t,a,n,i,o){return T(),g("form",{class:"login-form",onSubmit:t[2]||(t[2]=j(((...t)=>e.submit&&e.submit(...t)),["prevent"]))},[C("p",null,[Ne,C("a",{href:e.loginUrl,target:"_blank"}," TimeSise API credentials ",8,je)]),C("div",Be,[h(C("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.input.username=t),type:"text",name:"username",placeholder:"Username",required:""},null,512),[[N,e.input.username]]),h(C("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.input.password=t),type:"password",name:"password",placeholder:"Password",required:""},null,512),[[N,e.input.password]])]),C("button",De,A(e.loading?"Loading...":"Login"),1),e.apiError?(T(),g("div",$e,[e.isUnauthorized?(T(),g("div",He," Invalid credentials ")):e.errorFmt?(T(),g("div",We,A(e.errorFmt),1)):(T(),g("div",Xe," Unknown error: "+A(e.apiError),1))])):P("",!0)],32)},Fe.__scopeId="data-v-7310a90a";var Ge=v({name:"App",components:{Login:Fe},setup(){const{api:e}=re(),t=m(!1),a=m(),n=m(),i=E((()=>{var e;return 401===(null==(e=a.value)?void 0:e.status)||!1})),o=async()=>{t.value=!0,a.value=void 0;try{n.value=await e.listItems({})}catch(i){a.value=i}finally{t.value=!1}};S((()=>{o()}));return{isLoading:t,isUnauthorized:i,items:n,error:a,formatResponseError:ue,onLogin:()=>{o()}}}});f("data-v-553a80aa");const Je={class:"app-view"},Ye={key:0,class:"loading"},Ke={key:0},Qe={key:1,class:"error"},Ze={key:2};y(),Ge.render=function(e,t,a,n,i,o){const r=x("Login");return T(),g("div",Je,[e.isLoading?(T(),g("div",Ye," Loading... ")):(T(),g(k,{key:1},[e.isUnauthorized?(T(),g("div",Ke,[U(r,{class:"login",onSuccess:e.onLogin},null,8,["onSuccess"])])):e.error?(T(),g("div",Qe,A(e.formatResponseError(e.error)),1)):e.items?P("",!0):(T(),g("div",Ze," This should not happen: no error, no loading but items is undefined "))],64))])},Ge.__scopeId="data-v-553a80aa";const et=Symbol("PlayerRectKey");function tt(){const e=d(et);if(void 0===e)throw new Error("playerRect not available");return e}function at(e){if(null==e)throw new Error(`Expected 'val' to be defined, but received ${e}`)}function nt(e){let t;const a=m(new DOMRectReadOnly);return S((()=>{at(e.value),a.value=e.value.getBoundingClientRect()})),S((()=>{t=new ResizeObserver((t=>{at(e.value);at(t.find((t=>t.target===e.value))),a.value=e.value.getBoundingClientRect()})),at(e.value),t.observe(e.value)})),B((()=>{void 0!==t&&(at(e.value),t.unobserve(e.value))})),a}function it(e){const t=L(),a=D(),n=ke(),i=()=>{const i=E((()=>{const t=e=>e.toString();return void 0===e.value?{start:void 0,stop:void 0}:{start:t(e.value.start),stop:t(e.value.stop)}})),o=E((()=>{const{start:e,stop:t}=a.query;if(null===e||null===t)return;if(Array.isArray(e)||Array.isArray(t))return;if(""===e||""===t)return;const i=parseInt(e),o=parseInt(t);if(isNaN(i)||isNaN(o))return;const r=Math.round(n.state.duration);if(i<0||i>r)console.warn("query params: unexpected start value",i);else{if(!(o<0||o>r))return{start:i,stop:o};console.warn("query params: unexpected stop value",o)}})),r=()=>{const{start:e,stop:n}=i.value,{start:o,stop:r}=a.query;e===o&&n===r||(at(a.name),t.replace(l(s({},a),{query:l(s({},a.query),{start:e,stop:n})})))};$([o],(()=>{(()=>{if(void 0===o.value)return;const{start:t,stop:a}=o.value;void 0!==e.value&&t===e.value.start&&a===e.value.stop||(e.value={start:t,stop:a},r())})()}),{immediate:!0}),$([i],(()=>{r()}),{immediate:!0})},o=n.getters.isReady;S((()=>{let e=null;e=$([o],(()=>{o.value&&(i(),null!==e&&e())}),{immediate:!0})}))}const ot=e=>{const t=Math.floor(e/3600),a=Math.floor((e-3600*t)/60),n=e-3600*t-60*a,i=e=>e<10?"0":"";return t>0?[t.toString(),i(a)+a.toString(),i(n)+n.toFixed()].join(":"):a>0?[a.toString(),i(n)+n.toFixed()].join(":"):n.toFixed(1)},rt=e=>{const t=Math.floor(e/3600),a=Math.floor((e-3600*t)/60),n=e-3600*t-60*a,i=e=>e<10?"0":"";return[i(t)+t.toString(),i(a)+a.toString(),i(n)+n.toFixed()].join(":")};var st=v({name:"Timer",setup(){const e=ke(),t=m(0);let a;const n=()=>{t.value+=10},i=()=>{a&&clearInterval(a),a=void 0},o=E((()=>e.state.playState));$([o],(()=>{switch(t.value=e.state.currentTime.value,o.value){case fe.Play:a=window.setInterval(n,10);break;case fe.Pause:case fe.Stop:i();break;default:console.error("Unknown PlayState",o.value)}}),{flush:"pre"}),p((()=>{const{value:a,source:n}=e.state.currentTime;n===he.Seek&&(t.value=a)}));return{current:E((()=>rt(t.value/1e3))),total:E((()=>rt(e.state.duration/1e3)))}}});const lt={class:"timer"},ut={class:"current",title:"current time"},ct=O(" / "),dt={class:"total",title:"total time"};st.render=function(e,t,a,n,i,o){return T(),g("div",lt,[C("span",ut,A(e.current),1),ct,C("span",dt,A(e.total),1)])};var vt=v({props:{audioSrcs:{type:Array,required:!0}},setup(){const e=ke(),t=m(),a=m(),n=e=>(at(e.target),e.target),i=E((()=>e.state.currentTime));S((()=>$([i],(()=>{if(i.value.source!==he.Cursor)return;const e=t.value;e&&(e.currentTime=i.value.value/1e3)}),{flush:"sync",immediate:!0}))),S((()=>$([a],(()=>{void 0!==a.value&&e.mutations.setPlayState(fe.Stop)}),{immediate:!0})));const o=E((()=>e.state.playState));S((()=>$([o],(()=>{const a=t.value;if(a)switch(e.mutations.setCurrentTime({value:1e3*a.currentTime,source:he.TimeUpdate}),o.value){case fe.Play:a.play();break;case fe.Pause:a.pause();break;case fe.Stop:a.pause(),a.currentTime=0;break;default:console.error("Unknown PlayState",o.value)}}),{flush:"sync",immediate:!0})));const r=E((()=>e.state.playbackRate));return $([r],(()=>{t.value&&(t.value.playbackRate=r.value)}),{immediate:!0}),M((()=>{const e=t.value;if(e){for(e.pause(),e.currentTime=0,e.removeAttribute("src");e.firstChild;)e.removeChild(e.firstChild);e.load()}})),{el:t,onTimeUpdate:t=>{const a=n(t);e.mutations.setCurrentTime({value:1e3*a.currentTime,source:he.TimeUpdate})},onPause:t=>{const a=n(t);a.seeking||(e.mutations.setCurrentTime({value:1e3*a.currentTime,source:he.TimeUpdate}),e.mutations.setPlayState(fe.Pause))},onPlaying:t=>{const a=n(t);e.mutations.setCurrentTime({value:1e3*a.currentTime,source:he.TimeUpdate}),e.mutations.setPlayState(fe.Play)},onEnded:t=>{const a=n(t);e.mutations.setCurrentTime({value:1e3*a.currentTime,source:he.TimeUpdate}),e.mutations.setPlayState(fe.Stop)},onError:e=>{var t;a.value=new Error(`code = ${null==(t=e.currentTarget.error)?void 0:t.code}`)},audioError:a,onDurationChange:t=>{const a=n(t);e.mutations.setDuration(1e3*a.duration)},onSeeked:t=>{const a=n(t);e.mutations.setCurrentTime({value:1e3*a.currentTime,source:he.Seek})}}}});f("data-v-fbe8367e");const mt={class:"audio"},pt=["src","type"],ft=C("p",{class:"error"},[O(" Your browser does not support the "),C("code",null,"audio"),O(" element. ")],-1),yt={key:0,class:"error"};y(),vt.render=function(e,t,a,n,i,o){return T(),g("div",mt,[C("audio",{ref:"el",autoplay:"",controls:"",onTimeupdate:t[0]||(t[0]=(...t)=>e.onTimeUpdate&&e.onTimeUpdate(...t)),onPause:t[1]||(t[1]=(...t)=>e.onPause&&e.onPause(...t)),onPlaying:t[2]||(t[2]=(...t)=>e.onPlaying&&e.onPlaying(...t)),onEnded:t[3]||(t[3]=(...t)=>e.onEnded&&e.onEnded(...t)),onError:t[4]||(t[4]=(...t)=>e.onError&&e.onError(...t)),onDurationchange:t[5]||(t[5]=(...t)=>e.onDurationChange&&e.onDurationChange(...t)),onSeeked:t[6]||(t[6]=(...t)=>e.onSeeked&&e.onSeeked(...t))},[(T(!0),g(k,null,b(e.audioSrcs,(e=>(T(),g("source",{key:e.src,src:e.src,type:e.type},null,8,pt)))),128)),ft],544),e.audioError?(T(),g("p",yt," Unable to load media file: "+A(e.audioError),1)):P("",!0)])},vt.__scopeId="data-v-fbe8367e";const ht=Symbol("track-plugins-container-svg");var wt=v({setup(){const e=m();return F(ht,e),{slotContainer:e}}});f("data-v-70098b41");const gt={ref:"slotContainer",class:"track-plugins-container",width:"100%",height:"100%"},kt=C("rect",{x:"0",y:"0",width:"100%",height:"100%",stroke:"black","stroke-width":"0",fill:"none"},null,-1);y(),wt.render=function(e,t,a,n,i,o){return T(),g("svg",gt,[kt,H(e.$slots,"default",{},void 0,!0)],512)},wt.__scopeId="data-v-70098b41";var bt=v({name:"PlayCursor",props:{selection:{type:Object,default:void 0}},setup(e){const t=ke(),a=m(),n=[{transform:"translateX(0)"},{transform:"translateX(calc(100% - 2px))"}],i=E((()=>{if(e.selection){const{start:a,stop:n}=e.selection;return{duration:n-a,delay:a,endDelay:t.state.duration-n,iterations:1}}return{duration:t.state.duration,delay:0,endDelay:0,iterations:1,fill:"forwards"}}));return S((async()=>{at(a.value);const e=a.value.animate(n,i.value);e.pause();const o=E((()=>t.state.playState));$([o],(()=>{e.currentTime=t.state.currentTime.value,function(e,t){switch(t){case fe.Play:e.play();break;case fe.Pause:e.pause();break;case fe.Stop:e.currentTime=0,e.pause();break;default:console.error("Unknown PlayState",t)}}(e,o.value)}),{flush:"sync",immediate:!0}),p((()=>{const{value:a,source:n}=t.state.currentTime;n===he.Seek&&(e.currentTime=a)})),p((()=>{at(e.effect),e.effect.updateTiming(i.value)}));const r=E((()=>t.state.playbackRate));$([r],(()=>{e.playbackRate=t.state.playbackRate}))})),{cursorWidth:2,cursor:a,duration:t.state.duration}}});f("data-v-08c77e68");const Tt=["width"];function At(){const e=ke(),t=tt();return{positionToTime:(a,n)=>{const i=void 0!==n?n.stop-n.start:e.state.duration,o=void 0!==n?n.start:0,r=t.value.width;return 0===r?(console.warn("positionToTime: unexpected width",r),0):Math.round(o+a/r*i)},timeToPosition:(a,n)=>{const i=t.value.width;let o=0;const r=void 0!==n?(o=n.start,n.stop-n.start):e.state.duration;return 0===r?(console.warn("timeToPosition: unexpected duration",r),0):Math.round((a-o)*i/r)}}}y(),bt.render=function(e,t,a,n,i,o){return T(),g("rect",{ref:"cursor",class:"cursor",x:"0",y:"0",width:e.cursorWidth,height:"100%"},null,8,Tt)},bt.__scopeId="data-v-08c77e68";var Et,Lt,St=v({name:"InteractivePlayCursor",components:{PlayCursor:bt},props:{selection:{type:Object,default:void 0}},setup(e){const t=ke(),a=tt(),{positionToTime:n}=At(),i=d(ht);if(!i)throw new Error("InteractivePlayCursor.vue expects to be a child of TrackPluginsContainer.vue");let o;const r=e=>{o=e.clientX},s=i=>{void 0!==o&&(void 0!==o&&o!==i.clientX||(o=void 0,(i=>{const{clientX:o,target:r}=i;if(!r)throw new Error(`target not found: ${r}`);const s=n(o-a.value.left,e.selection);t.mutations.setCurrentTime({value:s,source:he.Cursor})})(i)))};S((()=>p((()=>{i.value&&(i.value.removeEventListener("mousedown",r),i.value.removeEventListener("mouseup",s),i.value.addEventListener("mousedown",r),i.value.addEventListener("mouseup",s))})))),M((()=>{i.value&&(i.value.removeEventListener("mousedown",r),i.value.removeEventListener("mouseup",s))}))}});St.render=function(e,t,a,n,i,o){const r=x("PlayCursor");return T(),z(r,{selection:e.selection},null,8,["selection"])},(Lt=Et||(Et={}))[Lt.Left=0]="Left",Lt[Lt.Right=1]="Right";var xt=v({name:"Region",props:{modelValue:{type:Object,required:!1,default:void 0}},emits:["update:modelValue"],setup(e,{emit:t}){const a=d(ht);if(!a)throw new Error("Region.vue expects to be a child of TrackPluginsContainer.vue");const{positionToTime:n,timeToPosition:i}=At(),o=m(),r=m(),s=m(),l=E((()=>{if(void 0!==r.value&&void 0!==s.value)return s.value-r.value})),u=tt(),c=e=>{e&&(r.value=i(e.start),s.value=i(e.stop))};$((()=>e.modelValue),(e=>c(e)),{immediate:!0}),$(u,(()=>c(e.modelValue)),{immediate:!0});const v=()=>{if(void 0===r.value||void 0===s.value)return void t("update:modelValue",void 0);const a={start:n(r.value),stop:n(s.value)};void 0!==e.modelValue&&e.modelValue.start===a.start&&e.modelValue.stop===a.stop||t("update:modelValue",a)},f=({clientX:e})=>{const t=({clientX:t})=>{let a;if(t===e)return;t>e?a=1:t<e&&(a=0),r.value=e-u.value.left,s.value=e-u.value.left;let n=t-u.value.left;if(0===a)n<0&&(n=0),n>s.value&&(n=s.value),r.value=n;else{if(1!==a)throw new Error(`Direction is not set (${a}). Unexpected.`);n>u.value.width&&(n=u.value.width),n<r.value&&(n=r.value),s.value=n}},a=()=>{v(),window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",a)};window.addEventListener("mousemove",t),window.addEventListener("mouseup",a)};S((()=>p((()=>{a.value&&(a.value.removeEventListener("mousedown",f),a.value.addEventListener("mousedown",f))})))),M((()=>{a.value&&a.value.removeEventListener("mousedown",f)}));return{el:o,width:l,start:r,stop:s,startCreate:f,startMove:({clientX:e})=>{at(o.value);const t=e-o.value.getBoundingClientRect().left,a=({clientX:e})=>{at(l.value);let a=e-t-u.value.left,n=a+l.value;a<=0&&(a=0,n=a+l.value),n>=u.value.width&&(n=u.value.width,a=n-l.value),r.value=a,s.value=n},n=()=>{window.removeEventListener("mouseup",n),window.removeEventListener("mousemove",a),v()};window.addEventListener("mouseup",n),window.addEventListener("mousemove",a)},startResizeLeft:()=>{const e=({clientX:e})=>{at(s.value);let t=e-u.value.left;t<0&&(t=0),t>s.value&&(t=s.value),r.value=t},t=()=>{window.removeEventListener("mouseup",t),window.removeEventListener("mousemove",e),v()};window.addEventListener("mouseup",t),window.addEventListener("mousemove",e)},startResizeRight:()=>{const e=({clientX:e})=>{at(r.value);let t=e-u.value.left;t>u.value.width&&(t=u.value.width),t<r.value&&(t=r.value),s.value=t},t=()=>{window.removeEventListener("mouseup",t),window.removeEventListener("mousemove",e),v()};window.addEventListener("mouseup",t),window.addEventListener("mousemove",e)},closeHandler:()=>{r.value=void 0,s.value=void 0,v()}}}});f("data-v-64b0760c");const Ct=["x"],Pt=["x","width"],Ut=["x"],It=["x"],Ot=[C("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"transparent"},null,-1),C("g",{transform:"scale(0.5) translate(256 256)"},[C("path",{d:"M443.6,387.1L312.4,255.4l131.5-130c5.4-5.4,5.4-14.2,0-19.6l-37.4-37.6c-2.6-2.6-6.1-4-9.8-4c-3.7,0-7.2,1.5-9.8,4  L256,197.8L124.9,68.3c-2.6-2.6-6.1-4-9.8-4c-3.7,0-7.2,1.5-9.8,4L68,105.9c-5.4,5.4-5.4,14.2,0,19.6l131.5,130L68.4,387.1  c-2.6,2.6-4.1,6.1-4.1,9.8c0,3.7,1.4,7.2,4.1,9.8l37.4,37.6c2.7,2.7,6.2,4.1,9.8,4.1c3.5,0,7.1-1.3,9.8-4.1L256,313.1l130.7,131.1  c2.7,2.7,6.2,4.1,9.8,4.1c3.5,0,7.1-1.3,9.8-4.1l37.4-37.6c2.6-2.6,4.1-6.1,4.1-9.8C447.7,393.2,446.2,389.7,443.6,387.1z"})],-1)];function Rt(e){const t=e=>e.every((t=>{return a=t,n=e[0],Math.abs(a-n)<=1e-4;var a,n}));if(t(e.min))return console.error("Unexpected waveform: waveform.min has constant values",e.min),!1;if(t(e.max))return console.error("Unexpected waveform: waveform.max has constant values",e.max),!1;const a=e.min.filter(((t,a)=>t===e.max[a]));return a.length>e.min.length/4&&console.error("Unexpected waveform: waveform has too many empty points (min = max)",a),!0}function _t(e){const{newAbortableApi:t}=re(),a=m(!1),n=m(),i=m(),o=E((()=>{if(void 0!==i.value)return function(e){const t=[];for(const n of e.time.keys())t[n]={time:e.time[n],min:e.min[n],max:e.max[n]};const a=e.min.concat(e.max);return{data:t,meta:{maxVal:Math.max(...a),minVal:Math.min(...a)}}}(i.value)})),r=E((()=>void 0!==i.value&&(function(e){return e.time.length>0&&e.time.length===e.min.length&&e.min.length===e.max.length}(i.value)?Rt(i.value):(console.error("Unexpected waveform: waveform has invalid length",i.value),!1))));let s;return S((()=>$([e],(()=>{a.value=!0,(async()=>{void 0!==s&&s.abort(),a.value=!0;try{s=new AbortController;const a=t(s),o=await a.retrieveItemWaveform(e.value);if(s.signal.aborted)throw new DOMException("","AbortError");if(void 0===o.waveform)throw new Error("waveform is empty");i.value=o.waveform,n.value=void 0,s=void 0}catch(o){if(o instanceof DOMException&&"AbortError"===o.name)return;n.value=o}a.value=!1})()}),{immediate:!0}))),{isLoading:a,error:n,isValid:r,waveform:o}}y(),xt.render=function(e,t,a,n,i,o){return T(),g("g",null,[e.start?(T(),g("rect",{key:0,class:"delimiter left",x:e.start-4,y:"0",height:"100%",onMousedown:t[0]||(t[0]=j(((...t)=>e.startResizeLeft&&e.startResizeLeft(...t)),["stop"]))},null,40,Ct)):P("",!0),e.width?(T(),g("rect",{key:1,ref:"el",class:"content",x:e.start,y:"0",height:"100%",width:e.width,onMousedown:t[1]||(t[1]=j(((...t)=>e.startMove&&e.startMove(...t)),["stop"]))},null,40,Pt)):P("",!0),e.stop?(T(),g("rect",{key:2,class:"delimiter right",x:e.stop,y:"0",height:"100%",onMousedown:t[2]||(t[2]=j(((...t)=>e.startResizeRight&&e.startResizeRight(...t)),["stop"]))},null,40,Ut)):P("",!0),e.stop&&e.width&&e.width>40?(T(),g("svg",{key:3,x:e.stop-40,y:0,width:"40",height:"40",viewBox:"0 0 512 512",class:"close",onMousedown:t[3]||(t[3]=j(((...t)=>e.closeHandler&&e.closeHandler(...t)),["stop"]))},Ot,40,It)):P("",!0)])},xt.__scopeId="data-v-64b0760c";var Mt=v({emits:["resized"],setup(e,{emit:t}){const a=m(),n=nt(a);return p((()=>{t("resized",n.value)})),{el:a,svgSize:n}}});f("data-v-481e303c");const zt={ref:"el"},qt=["height","width","viewBox"];y(),Mt.render=function(e,t,a,n,i,o){return T(),g("div",zt,[(T(),g("svg",{class:"fluid-svg",height:e.svgSize.height,width:e.svgSize.width,viewBox:`0 0 ${e.svgSize.width} ${e.svgSize.height}`},[H(e.$slots,"default",{},void 0,!0)],8,qt))],512)},Mt.__scopeId="data-v-481e303c";var Vt=v({name:"Waveform",components:{FluidSVG:Mt},props:{waveform:{type:Object,required:!0}},setup(e){const t=m(),a=E((()=>{const a=t.value?t.value.height:0,n=t.value?t.value.width:0;if(0===a)return"";const i=e.waveform.data[0],o=e.waveform.data[e.waveform.data.length-1],r=W().domain([i.time,o.time]).range([0,n]),s=W().domain([e.waveform.meta.minVal,e.waveform.meta.maxVal]).range([a,-a]),l=e=>a-s(e)/2-a/2;return X().x((e=>r(e.time))).y0((e=>l(e.min))).y1((e=>l(e.max)))(e.waveform.data)}));return{svgSize:t,path:a}}});f("data-v-e8070146");const Ft={class:"chart-data"},Nt=["d"];y(),Vt.render=function(e,t,a,n,i,o){const r=x("FluidSVG");return T(),z(r,{class:"waveform",onResized:t[0]||(t[0]=t=>e.svgSize=t)},{default:I((()=>[C("g",Ft,[C("path",{class:"area",d:e.path},null,8,Nt)])])),_:1})},Vt.__scopeId="data-v-e8070146";var jt=v({name:"WaveformContainer",components:{Waveform:Vt},props:{itemId:{type:String,required:!0},start:{type:Number,required:!1,default:void 0},stop:{type:Number,required:!1,default:void 0},nbPixels:{type:Number,required:!1,default:void 0}},emits:["mousedown"],setup(e){const{isLoading:t,error:a,isValid:n,waveform:i}=_t(E((()=>({uuid:e.itemId,start:e.start?e.start/1e3:void 0,stop:e.stop?e.stop/1e3:void 0,nbPixels:e.nbPixels}))));return $([t],(()=>{var e;if(!t.value){const t=null==(e=document.querySelector(".audio"))?void 0:e.getElementsByTagName("audio")[0];if(t&&!isNaN(t.duration)){document.querySelector("#player-total-time").innerHTML="/ "+function(e){let t=Math.floor(e/60);return t=t>=10?t:"0"+t,e=Math.floor(e%60),t+":"+(e=e>=10?e:"0"+e)}(t.duration)}}}),{immediate:!1}),$([a],(()=>{void 0!==a.value&&console.error("Unable to get waveform: ",a.value)}),{immediate:!0}),{isLoading:t,error:a,waveform:i,isValid:n}}});f("data-v-e67787a0");const Bt={class:"waveform-container"},Dt={key:0,class:"loading"},$t={key:1,class:"error"},Ht={key:2,class:"error"},Wt={key:3,class:"error"},Xt={key:5,class:"error"};y(),jt.render=function(e,t,a,n,i,o){const r=x("Waveform");return T(),g("div",Bt,[e.isLoading?(T(),g("div",Dt," Loading waveform... ")):e.error?(T(),g("div",$t," Waveform not available. Please check your browser's network logs. ")):e.waveform?e.isValid?e.waveform?(T(),z(r,{key:4,waveform:e.waveform,class:"waveform",onMousedown:t[0]||(t[0]=t=>e.$emit("mousedown",t))},{default:I((()=>[H(e.$slots,"default",{},void 0,!0)])),_:3},8,["waveform"])):(T(),g("div",Xt," Waveform not loading: undefined behavior ")):(T(),g("div",Wt," The waveform do not seems valid. Please check your browser's console logs. ")):(T(),g("div",Ht," Waveform not found "))])},jt.__scopeId="data-v-e67787a0";var Gt=v({components:{FluidSVG:Mt},props:{firstTime:{type:Number,required:!0},lastTime:{type:Number,required:!0}},setup(e){const t=m(),a=m(),n=E((()=>{const a=t.value?t.value.width:0,n=e.firstTime/1e3,i=e.lastTime/1e3;return W().domain([n,i]).range([0,a])}));return S((()=>p((()=>{at(a.value);const e=G(a.value),t=J(n.value).tickFormat(ot);e.call(t)})))),{group:a,svgSize:t}}});f("data-v-39913d75");const Jt={ref:"group"};y(),Gt.render=function(e,t,a,n,i,o){const r=x("FluidSVG");return T(),z(r,{class:"x-axis-container",onResized:t[0]||(t[0]=t=>e.svgSize=t)},{default:I((()=>[C("g",Jt,null,512)])),_:1})},Gt.__scopeId="data-v-39913d75";var Yt=v({components:{WaveformContainer:jt,TrackPluginsContainer:wt,InteractivePlayCursor:St,Region:xt,Axis:Gt},props:{itemId:{type:String,required:!0},selection:{type:Object,required:!1,default:void 0}},emits:["selection"],setup(e,{emit:t}){const a=ke(),n=m();return $([()=>e.selection],(()=>{n.value=e.selection}),{immediate:!0}),$([n],(()=>{t("selection",n.value)}),{immediate:!0}),{innerSelection:n,lastTime:E((()=>a.state.duration))}}});f("data-v-63e7d54d");const Kt={class:"maintrack-and-axis-container"},Qt={class:"maintrack-container"};y(),Yt.render=function(e,t,a,n,i,o){const r=x("WaveformContainer"),s=x("Region"),l=x("InteractivePlayCursor"),u=x("TrackPluginsContainer"),c=x("Axis");return T(),g("div",Kt,[C("div",Qt,[U(r,{class:"maintrack","item-id":e.itemId},null,8,["item-id"]),U(u,{class:"track-plugins-container"},{default:I((()=>[U(s,{modelValue:e.innerSelection,"onUpdate:modelValue":t[0]||(t[0]=t=>e.innerSelection=t)},null,8,["modelValue"]),U(l)])),_:1})]),U(c,{"first-time":0,"last-time":e.lastTime},null,8,["last-time"])])},Yt.__scopeId="data-v-63e7d54d";var Zt=v({components:{FluidSVG:Mt},props:{minData:{type:Number,required:!0},maxData:{type:Number,required:!0}},setup(e){const t=m(),a=m(),n=E((()=>{const a=t.value?t.value.height:0;return W().domain([e.minData,e.maxData]).range([a,0])}));return S((()=>p((()=>{at(a.value);const e=G(a.value),t=Y(n.value);e.attr("transform","translate(50, 0)").call(t)})))),{group:a,svgSize:t}}});f("data-v-05f8115a");const ea={ref:"group"};y(),Zt.render=function(e,t,a,n,i,o){const r=x("FluidSVG");return T(),z(r,{class:"y-axis-container",onResized:t[0]||(t[0]=t=>e.svgSize=t)},{default:I((()=>[C("g",ea,null,512)])),_:1})},Zt.__scopeId="data-v-05f8115a";var ta=v({components:{FluidSVG:Mt,YAxis:Zt},props:{hdf5:{type:Object,required:!0},start:{type:Number,required:!1,default:void 0},stop:{type:Number,required:!1,default:void 0}},setup(e){const t=m(),a="#"+(16777215*Math.random()<<0).toString(16),n=E((()=>e.hdf5.audio_metadata.duration)),i=E((()=>e.hdf5.data_object.frame_metadata.samplerate)),o=E((()=>e.hdf5.data_object.frame_metadata.stepsize)),r=E((()=>e.start||0)),s=E((()=>e.stop||1e3*n.value)),l=E((()=>{const t=e=>e*o.value/i.value*1e3,a=e.hdf5.data_object.value.numpyArray.map(((e,a)=>[t(a),e])),n=[t(a.length),0];return[[0,0],...a,n]})),u=E((()=>{const e=l.value.filter((e=>e[0]>r.value&&e[0]<s.value)).map((e=>e[1]));return{min:Math.min(...e),max:Math.max(...e)}})),c=E((()=>{const e=t.value?t.value.width:0,a=t.value?t.value.height:0,n=W().domain([r.value,s.value]).range([0,e]),i=W().domain([u.value.min,u.value.max]).range([a,0]);return K().curve(Q).x((e=>n(e[0]))).y((e=>i(e[1])))(l.value)})),d=Math.min(0,u.value.min),v=Math.max(0,u.value.max);return{svgSize:t,path:c,minValue:d,maxValue:v,fill:a}}});f("data-v-06e753b9");const aa={class:"framewise-container"},na={class:"chart-data"},ia=["d","fill"];y(),ta.render=function(e,t,a,n,i,o){const r=x("YAxis"),s=x("FluidSVG");return T(),g("div",aa,[U(r,{class:"yaxis-visualization","min-data":e.minValue,"max-data":e.maxValue},null,8,["min-data","max-data"]),U(s,{class:"framewise-visualization",onResized:t[0]||(t[0]=t=>e.svgSize=t)},{default:I((()=>[C("g",na,[C("path",{class:"line",d:e.path,fill:e.fill},null,8,ia)])])),_:1})])},ta.__scopeId="data-v-06e753b9";var oa=v({props:{hdf5:{type:Object,required:!0},start:{type:Number,required:!1,default:void 0},stop:{type:Number,required:!1,default:void 0}},setup(e){const t=E((()=>e.hdf5.audio_metadata.duration)),a=E((()=>e.start||0)),n=E((()=>e.stop||1e3*t.value)),i=E((()=>e.hdf5.data_object.time.numpyArray.map(((e,t)=>{const i=1e3*e;if(i>a.value&&i<n.value)return{val:(i-a.value)/(n.value-a.value)*100,idx:t}})).filter((e=>void 0!==e)))),o=Math.max(...e.hdf5.data_object.label.numpyArray);return{points:i,values:E((()=>e.hdf5.data_object.label.numpyArray.map((e=>e/o))))}}});f("data-v-6063c71b");const ra={class:"event-container"};y(),oa.render=function(e,t,a,n,i,o){return T(),g("div",ra,[(T(!0),g(k,null,b(e.points,(({val:t,idx:a})=>(T(),g("div",{key:t,style:Z({left:`${t}%`,height:100*e.values[a]+"%"}),class:"event"},null,4)))),128))])},oa.__scopeId="data-v-6063c71b";var sa=v({props:{hdf5:{type:Object,required:!0},start:{type:Number,required:!1,default:void 0},stop:{type:Number,required:!1,default:void 0}},setup(e){const t=E((()=>e.hdf5.audio_metadata.duration)),a=E((()=>e.start||0)),n=E((()=>e.stop||1e3*t.value)),i=E((()=>e.hdf5.data_object.duration.numpyArray));return{points:E((()=>e.hdf5.data_object.time.numpyArray.map(((e,t)=>{const o=1e3*e,r=1e3*i.value[t];if(o>=a.value&&o<=n.value){const e=o+r>=n.value?n.value-o:r;return{t:100*o/(n.value-a.value),d:100*e/(n.value-a.value)}}return o+r>=a.value&&o+r<=n.value?{t:0,d:100*(o+r-a.value)/(n.value-a.value)}:o<a.value&&o+r>n.value?{t:0,d:100}:{t:void 0,d:void 0}}))))}}});f("data-v-d98087a4");const la={class:"segment-container"};y(),sa.render=function(e,t,a,n,i,o){return T(),g("div",la,[(T(!0),g(k,null,b(e.points,(({t:e,d:t})=>(T(),g("div",{key:e,style:Z({left:`${e}%`,height:"100%",width:`${t}%`}),class:"event"},null,4)))),128))])},sa.__scopeId="data-v-d98087a4";var ua=v({components:{FramewiseVisualization:ta,EventVisualization:oa,SegmentVisualization:sa},props:{resultUuid:{type:String,required:!0},start:{type:Number,required:!1,default:void 0},stop:{type:Number,required:!1,default:void 0}},setup(e){const{currentBaseUrl:t}=re(),a=m(!0),n=m(),i=m();return S((()=>$((()=>e.resultUuid),(()=>{(async()=>{a.value=!0;try{const a=`${t}/results/${e.resultUuid}/json/`,n=await fetch(a);if(!n.ok)throw n;const o=await n.json();if(0===o.length)throw new Error("result sent an empty array");i.value=o[0]}catch(o){n.value=o}a.value=!1})()}),{immediate:!0}))),{formatResponseError:ue,loading:a,error:n,hdf5:i,hdf5Event:i,hdf5Segment:i}}});f("data-v-3c222e45");const ca={key:0},da={key:1,class:"error"},va={key:2,class:"hdf5-visualization"},ma={key:0},pa={key:4},fa={key:5},ya={key:6};y(),ua.render=function(e,t,a,n,i,o){const r=x("FramewiseVisualization"),s=x("EventVisualization"),l=x("SegmentVisualization");return e.loading?(T(),g("div",ca," Loading... ")):e.error?(T(),g("div",da," Unable to retrieve HDF5 : "+A(e.formatResponseError(e.error)),1)):(T(),g("div",va,[void 0===e.hdf5?(T(),g("p",ma," unexpected error: hdf5 is undefined ")):"framewise"===e.hdf5.time_mode?(T(),z(r,{key:1,hdf5:e.hdf5,start:e.start,stop:e.stop},null,8,["hdf5","start","stop"])):"event"===e.hdf5.time_mode?(T(),g(k,{key:2},[void 0!==e.hdf5Event?(T(),z(s,{key:0,hdf5:e.hdf5Event,start:e.start,stop:e.stop},null,8,["hdf5","start","stop"])):P("",!0)],64)):"segment"===e.hdf5.time_mode?(T(),g(k,{key:3},[void 0!==e.hdf5Segment?(T(),z(l,{key:0,hdf5:e.hdf5Segment,start:e.start,stop:e.stop},null,8,["hdf5","start","stop"])):P("",!0)],64)):"global"===e.hdf5.time_mode?(T(),g("div",pa,A(e.hdf5.id_metadata.name)+" = "+A(e.hdf5.data_object.value.numpyArray[0])+" "+A(e.hdf5.id_metadata.unit),1)):"timewise"===e.hdf5.time_mode?(T(),g("div",fa,"time_mode === 'timewise' is not implemented")):(T(),g("div",ya," Unknown time_mode : "+A(e.hdf5.time_mode),1))]))},ua.__scopeId="data-v-3c222e45";var ha=v({props:{resultUuid:{type:String,required:!0},start:{type:Number,required:!1,default:void 0},stop:{type:Number,required:!1,default:void 0}},setup(e){const{newAbortableApi:t}=re(),a=m(),n=nt(a),i=m(!0),o=m(),r=ke(),s=m(""),l=E((()=>e.start||0)),u=E((()=>e.stop||r.state.duration));let c;const d=async()=>{c&&c.abort();try{c=new AbortController;const a=t(c),o=await a.retrieveResultVisualizationRaw({uuid:e.resultUuid,start:l.value/1e3,stop:u.value/1e3,width:n.value.width||500,height:n.value.height||300}),r=await o.raw.blob();s.value=URL.createObjectURL(r)}catch(a){if(a instanceof DOMException&&"AbortError"===a.name)return;console.error("retrieveResultVisualization failed",a),o.value=a}finally{i.value=!1}},v=E((()=>[...Object.values(ee(e))]));return S((()=>{$(v,(()=>{i.value=!0,d()}),{immediate:!0})})),S((()=>{$(n,(()=>{d()}),{immediate:!0})})),{container:a,error:o,loading:i,imageSrc:s,formatResponseError:ue}}});f("data-v-54025b14");const wa={ref:"container",class:"bitmap-visualization"},ga={key:0},ka={key:1,class:"error"},ba=["src"];y(),ha.render=function(e,t,a,n,i,o){return T(),g("div",wa,[e.loading?(T(),g("p",ga," Loading... ")):e.error?(T(),g("p",ka," Error while retrieving Visual: "+A(e.formatResponseError(e.error)),1)):(T(),g("img",{key:2,class:"png-visualization",src:e.imageSrc,alt:""},null,8,ba))],512)},ha.__scopeId="data-v-54025b14";const Ta=Symbol("annotation-store");function Aa(){const e=d(Ta);if(void 0===e)throw new Error("store not found");return e}var Ea=v({name:"CreateAnnotation",props:{selection:{type:Object,required:!1,default:void 0},start:{type:Number,required:!0},width:{type:Number,required:!0}},emits:["close"],setup(e,{emit:t}){const{positionToTime:a}=At(),{api:n,currentBaseUrl:i}=re(),o=d(_n),r=Aa(),u=m(),v=m({title:"",description:""}),p=m();return{props:e,form:v,formEl:u,submit:async function(){var d;const m=a(e.start,e.selection),f=a(e.start+e.width,e.selection);if(at(o),void 0===o.value)throw new Error("no annotationtrack selected");const y=c.getAnnotationTrackUrl(i,o.value),h=l(s({track:y},v.value),{startTime:m,stopTime:f});try{const e=await n.createAnnotation({annotation:h});r.addAnnotation(o.value,e),v.value={title:"",description:""},null==(d=u.value)||d.reset(),t("close")}catch(w){p.value=w}}}}});f("data-v-5e9e88b4");const La=C("button",{class:"save-button"}," Save ",-1);y(),Ea.render=function(e,t,a,n,i,o){return T(),g("form",{class:"create-annotation",onSubmit:t[2]||(t[2]=j(((...t)=>e.submit&&e.submit(...t)),["prevent"]))},[h(C("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.form.title=t),class:"input title",placeholder:"Title",name:"title",type:"text",style:Z({width:e.props.width-10+"px"})},null,4),[[N,e.form.title]]),h(C("textarea",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.form.description=t),class:"input description",placeholder:"Description",name:"description",type:"text",style:Z({width:e.props.width-10+"px"})},null,4),[[N,e.form.description]]),La],32)},Ea.__scopeId="data-v-5e9e88b4";var Sa=v({name:"CreateAnnotation",props:{selection:{type:Object,required:!1,default:void 0},start:{type:Number,required:!0},width:{type:Number,required:!0}},emits:["close"],setup(e,{emit:t}){const{positionToTime:a}=At(),{api:n,currentBaseUrl:i}=re(),o=Aa();if(void 0===o.editingAnnotation)throw new Error("editAnnotation.annotationTrack is undefined");const r=m(),u=m({title:"",description:""});u.value.title=o.editingAnnotation.annotation.title||"",void 0!==o.editingAnnotation.annotation.description&&(u.value.description=o.editingAnnotation.annotation.description);const d=m();return{props:e,form:u,formEl:r,submit:async function(){var v;if(void 0===o.editingAnnotation)throw new Error("editAnnotation.annotationTrack is undefined");const m=a(e.start,e.selection),p=a(e.start+e.width,e.selection);try{if(void 0===o.editingAnnotation.annotation.uuid)throw new Error("editAnnotation.annotation.uuid is undefined");const e=c.getAnnotationTrackUrl(i,o.editingAnnotation.annotationTrack),a=l(s({uuid:o.editingAnnotation.annotation.uuid,track:e},u.value),{startTime:m,stopTime:p}),d={uuid:o.editingAnnotation.annotation.uuid,annotation:a};await n.updateAnnotation(d),o.editAnnotation(a),u.value={title:"",description:""},null==(v=r.value)||v.reset(),t("close")}catch(f){d.value=f}},destroy:async function(){var e;if(void 0===o.editingAnnotation)throw new Error("editAnnotation.annotationTrack is undefined");const a=o.editingAnnotation.annotation.uuid;if(void 0===a)throw new Error("editAnnotation.annotation.uuid is undefined");try{await n.destroyAnnotation({uuid:a}),o.removeEditingAnnotation(),u.value={title:"",description:""},null==(e=r.value)||e.reset(),t("close")}catch(i){d.value=i}}}}});f("data-v-717be3d4");const xa=C("button",{class:"form-button"}," Save ",-1);var Ca;y(),Sa.render=function(e,t,a,n,i,o){return T(),g("form",{class:"create-annotation",onSubmit:t[3]||(t[3]=j(((...t)=>e.submit&&e.submit(...t)),["prevent"]))},[h(C("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.form.title=t),class:"input title",placeholder:"Title",name:"title",type:"text",style:Z({width:e.props.width-10+"px"})},null,4),[[N,e.form.title]]),h(C("textarea",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.form.description=t),class:"input description",placeholder:"Description",name:"description",type:"text",style:Z({width:e.props.width-10+"px"})},null,4),[[N,e.form.description]]),xa,C("button",{type:"button",class:"form-buttun",onClick:t[2]||(t[2]=(...t)=>e.destroy&&e.destroy(...t))}," Delete ")],32)},Sa.__scopeId="data-v-717be3d4",function(e){e[e.Left=0]="Left",e[e.Right=1]="Right"}(Ca||(Ca={}));var Pa=v({name:"AnnotationRegion",components:{CreateAnnotation:Ea,EditAnnotation:Sa},props:{selection:{type:Object,required:!1,default:void 0},selectedAnnotationForEdition:{type:Object,required:!1,default:void 0}},setup(e){const t=Aa(),a=m(),{timeToPosition:n,positionToTime:i}=At(),o=m(),r=m(),s=m(),l=E((()=>{if(void 0!==r.value&&void 0!==s.value)return s.value-r.value})),u=tt(),c=E((()=>u.value.right-u.value.left));$((()=>t.editingAnnotation),(t=>{if(void 0===t)return r.value=void 0,void(s.value=void 0);r.value=n(t.annotation.startTime,e.selection),s.value=n(t.annotation.stopTime,e.selection)})),$((()=>e.selection),((e,t)=>{void 0!==r.value&&void 0!==s.value&&(r.value=n(i(r.value,t),e),s.value=n(i(s.value,t),e))}));const d=({clientX:e})=>{const t=({clientX:t})=>{let a;if(t===e)return;t>e?a=1:t<e&&(a=0),r.value=e-u.value.left,s.value=e-u.value.left;let n=t-u.value.left;if(0===a)n<0&&(n=0),n>s.value&&(n=s.value),r.value=n;else{if(1!==a)throw new Error(`Direction is not set (${a}). Unexpected.`);n>u.value.width&&(n=u.value.width),n<r.value&&(n=r.value),s.value=n}},a=()=>{window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",a)};window.addEventListener("mousemove",t),window.addEventListener("mouseup",a)};S((()=>p((()=>{a.value&&(a.value.removeEventListener("mousedown",d),a.value.addEventListener("mousedown",d))})))),M((()=>{a.value&&a.value.removeEventListener("mousedown",d)}));return{el:o,width:l,start:r,stop:s,startCreate:d,startMove:({clientX:e})=>{at(o.value);const t=e-o.value.getBoundingClientRect().left,a=({clientX:e})=>{at(l.value);let a=e-t-u.value.left,n=a+l.value;a<=0&&(a=0,n=a+l.value),n>=u.value.width&&(n=u.value.width,a=n-l.value),r.value=a,s.value=n},n=()=>{window.removeEventListener("mouseup",n),window.removeEventListener("mousemove",a)};window.addEventListener("mouseup",n),window.addEventListener("mousemove",a)},startResizeLeft:()=>{const e=({clientX:e})=>{at(s.value);let t=e-u.value.left;t<0&&(t=0),t>s.value&&(t=s.value),r.value=t},t=()=>{window.removeEventListener("mouseup",t),window.removeEventListener("mousemove",e)};window.addEventListener("mouseup",t),window.addEventListener("mousemove",e)},startResizeRight:()=>{const e=({clientX:e})=>{at(r.value);let t=e-u.value.left;t>u.value.width&&(t=u.value.width),t<r.value&&(t=r.value),s.value=t},t=()=>{window.removeEventListener("mouseup",t),window.removeEventListener("mousemove",e)};window.addEventListener("mouseup",t),window.addEventListener("mousemove",e)},closeHandler:()=>{r.value=void 0,s.value=void 0,t.editingAnnotation=void 0},parentContainer:a,playerWidth:c,props:e,annotationStore:t}}});f("data-v-61b8c4c3");const Ua={ref:"parentContainer",class:"container"},Ia=[C("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"transparent"},null,-1),C("g",{transform:"scale(0.5) translate(256 256)"},[C("path",{d:"M443.6,387.1L312.4,255.4l131.5-130c5.4-5.4,5.4-14.2,0-19.6l-37.4-37.6c-2.6-2.6-6.1-4-9.8-4c-3.7,0-7.2,1.5-9.8,4  L256,197.8L124.9,68.3c-2.6-2.6-6.1-4-9.8-4c-3.7,0-7.2,1.5-9.8,4L68,105.9c-5.4,5.4-5.4,14.2,0,19.6l131.5,130L68.4,387.1  c-2.6,2.6-4.1,6.1-4.1,9.8c0,3.7,1.4,7.2,4.1,9.8l37.4,37.6c2.7,2.7,6.2,4.1,9.8,4.1c3.5,0,7.1-1.3,9.8-4.1L256,313.1l130.7,131.1  c2.7,2.7,6.2,4.1,9.8,4.1c3.5,0,7.1-1.3,9.8-4.1l37.4-37.6c2.6-2.6,4.1-6.1,4.1-9.8C447.7,393.2,446.2,389.7,443.6,387.1z"})],-1)];y(),Pa.render=function(e,t,a,n,i,o){const r=x("CreateAnnotation"),s=x("EditAnnotation");return T(),g("div",Ua,[e.start?(T(),g("div",{key:0,class:"delimiter left",style:Z({position:"absolute",left:e.start-4+"px",height:"100%"}),onMousedown:t[0]||(t[0]=j(((...t)=>e.startResizeLeft&&e.startResizeLeft(...t)),["stop"]))},null,36)):P("",!0),e.width?(T(),g("div",{key:1,ref:"el",class:"content",style:Z({position:"absolute",left:`${e.start}px`,height:"100%",width:`${e.width}px`}),onMousedown:t[1]||(t[1]=j(((...t)=>e.startMove&&e.startMove(...t)),["stop"]))},[e.start&&!e.annotationStore.editingAnnotation?(T(),z(r,{key:0,selection:e.props.selection,start:e.start,width:e.width,onClose:e.closeHandler},null,8,["selection","start","width","onClose"])):P("",!0),e.start&&e.annotationStore.editingAnnotation?(T(),z(s,{key:1,selection:e.props.selection,start:e.start,width:e.width,onClose:e.closeHandler},null,8,["selection","start","width","onClose"])):P("",!0)],36)):P("",!0),e.stop?(T(),g("div",{key:2,class:"delimiter right",style:Z({position:"absolute",left:`${e.stop}px`,height:"100%"}),onMousedown:t[2]||(t[2]=j(((...t)=>e.startResizeRight&&e.startResizeRight(...t)),["stop"]))},null,36)):P("",!0),e.stop&&e.width&&e.width>40?(T(),g("svg",{key:3,style:Z({position:"absolute",left:e.stop-40+"px",height:"40px",width:"40px"}),viewBox:"0 0 512 512",class:"close",onMousedown:t[3]||(t[3]=j(((...t)=>e.closeHandler&&e.closeHandler(...t)),["stop"]))},Ia,36)):P("",!0)],512)},Pa.__scopeId="data-v-61b8c4c3";var Oa=v({name:"Annotations",props:{selection:{type:Object,default:void 0},playerWidth:{type:Number,required:!0}},setup(e){const t=ke(),a=Aa(),n=E((()=>{var t;return(null==(t=e.selection)?void 0:t.start)||0})),i=E((()=>{var a;return(null==(a=e.selection)?void 0:a.stop)||t.state.duration})),o=m(),r=m();function s(t){const a=i.value-n.value;return Math.round((t-n.value)*e.playerWidth/a)}return{annotationStore:a,selectionStart:n,selectionStop:i,props:e,show:function(e){return(void 0===a.editingAnnotation||e.uuid!==a.editingAnnotation.annotation.uuid)&&(e.stopTime>n.value&&e.startTime<i.value)},left:function(e){return at(e),e<n.value?0:s(e)},right:function(t){return at(t),t>i.value?e.playerWidth:s(t)},moreInfoUuid:o,selectedAnnotationForEdition:r}}});f("data-v-032fb05d");const Ra=["onMouseover"],_a=["onClick"],Ma=[C("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"pencil-alt",class:"svg-inline--fa fa-pencil-alt fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},[C("path",{fill:"currentColor",d:"M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"})],-1)];async function za(e){return await new Promise((t=>setTimeout(t,e)))}function qa(e){const{newAbortableApi:t}=re(),a=m(void 0),n=m(void 0),i=m(!0);let o;async function r(){i.value=!0,n.value=void 0,void 0!==o&&o.abort();try{o=new AbortController;const n=t(o),i=await async function(e,t,a){if(void 0===e.uuid)throw new Error(`Analysis has empty UUID: ${JSON.stringify(e)}`);let n,i=e;for(;"Task running"===i.resultUrl;){if(await za(5e3),a.signal.aborted)throw new DOMException("Aborted","AbortError");i=await t.retrieveAnalysisTrack({uuid:e.uuid})}if(void 0===i.resultUrl)throw new Error(`AnalysisTrack has no resultUrl: ${JSON.stringify(i)}`);try{n=c.getUuidFromResultUrl(i.resultUrl)}catch(o){throw o instanceof Error?new Error(`Unable to get UUID for analysisTrack.result_url (${o.message}) `+JSON.stringify(e)):o}return await t.retrieveResult({uuid:n})}(e.value,n,o);a.value=i}catch(r){if(r instanceof DOMException&&"AbortError"===r.name)return;n.value=r}i.value=!1}return S((()=>{$(e,(()=>{r()}),{immediate:!0})})),{result:a,loading:i,error:n}}y(),Oa.render=function(e,t,a,n,i,o){return T(),g("div",null,[(T(!0),g(k,null,b(e.annotationStore.annotations,(([a,n])=>(T(),g("div",{key:a},[(T(!0),g(k,null,b(n,(n=>(T(),g("div",{key:n.uuid},[e.show(n)?(T(),g("div",{key:0,class:"annotation",style:Z({left:`${e.left(n.startTime)}px`,width:e.right(n.stopTime)-e.left(n.startTime)+"px"}),onMouseover:t=>e.moreInfoUuid=n.uuid,onMouseleave:t[0]||(t[0]=t=>e.moreInfoUuid=void 0)},[O(A(n.title)+" ",1),C("div",{class:"pencil",onClick:t=>e.annotationStore.editingAnnotation={annotation:n,annotationTrack:a}},Ma,8,_a)],44,Ra)):P("",!0),e.show(n)&&e.moreInfoUuid==n.uuid?(T(),g("div",{key:1,class:"description",style:Z({left:`${e.right(n.stopTime)}px`})},A(n.description),5)):P("",!0)])))),128))])))),128))])},Oa.__scopeId="data-v-032fb05d";var Va=v({name:"AnnalysisTrack",components:{HDF5Visualization:ua,BitmapVisualization:ha,AnnotationRegion:Pa,Annotations:Oa},props:{analysisTrack:{type:Object,required:!0},start:{type:Number,required:!1,default:void 0},stop:{type:Number,required:!1,default:void 0},addAnnotation:{type:Boolean,required:!0},selection:{type:Object,required:!1,default:void 0}},emits:["deleted","selection"],setup(e,{emit:t}){const{api:a}=re(),n=E((()=>e.analysisTrack)),{loading:i,result:o,error:r}=qa(n),s=m(!1);const l=m(!1),u=m(),d=m();S((()=>$(n,(()=>{(async()=>{l.value=!0,u.value=void 0;try{const e=c.getUuidFromAnalysisUrl(n.value.analysis);d.value=await a.retrieveAnalysis({uuid:e})}catch(e){u.value=e}l.value=!1})()}),{immediate:!0})));const v=m();$([()=>e.selection],(()=>{v.value=e.selection}),{immediate:!0}),$([v],(()=>{t("selection",v.value)}),{immediate:!0});const p=tt(),f=E((()=>p.value.right-p.value.left));return{result:o,loadingResult:i,errorResult:r,deleteAt:async function(){var e;s.value=!0;const i=n.value.uuid;if(!i)throw new Error("Unable to delete AnalysisTrack: no uuid");await a.destroyAnalysisTrack({uuid:i}),t("deleted",i),s.value=!1,(null==(e=document.querySelector(".actions"))?void 0:e.firstChild).click()},loadingDelete:s,props:e,analysis:d,loadingAnalysis:l,errorAnalysis:u,AnalysisRenderTypeEnum:c.AnalysisRenderTypeEnum,innerSelection:v,playerWidth:f}}});f("data-v-6c642ed2");const Fa={class:"analysis-track"},Na=["title"],ja={key:0},Ba={key:1},Da={key:2,class:"info-title"},$a={key:3},Ha={key:0},Wa={key:1},Xa={key:2},Ga={key:2},Ja={key:4};y(),Va.render=function(e,t,a,n,i,o){const r=x("HDF5Visualization"),s=x("BitmapVisualization"),l=x("AnnotationRegion"),u=x("Annotations");return T(),g("div",Fa,[C("div",{class:"info-box",title:e.analysis?e.analysis.uuid:void 0},[e.loadingAnalysis?(T(),g("div",ja," Loading analysis... ")):e.errorAnalysis?(T(),g("div",Ba," Error retrieving analysis: "+A(e.errorAnalysis),1)):e.analysis?(T(),g("div",Da,A(e.analysis.title),1)):(T(),g("div",$a," Unexpected behavior ")),C("button",{class:"delete",onClick:t[0]||(t[0]=(...t)=>e.deleteAt&&e.deleteAt(...t))},A(e.loadingDelete?"Loading...":"x"),1)],8,Na),e.loadingResult||e.loadingAnalysis?(T(),g("div",Ha," Loading result... ")):e.errorResult?(T(),g("div",Wa," Error retrieving result: "+A(e.errorResult),1)):e.errorAnalysis?(T(),g("div",Xa," Error retrieving analysis: "+A(e.errorAnalysis),1)):e.result&&e.analysis?(T(),g(k,{key:3},[e.analysis.renderType===e.AnalysisRenderTypeEnum.NUMBER_0?(T(),z(r,{key:0,"result-uuid":e.result.uuid,start:e.start,stop:e.stop},null,8,["result-uuid","start","stop"])):e.analysis.renderType===e.AnalysisRenderTypeEnum.NUMBER_1?(T(),z(s,{key:1,"result-uuid":e.result.uuid,start:e.start,stop:e.stop},null,8,["result-uuid","start","stop"])):(T(),g("div",Ga,' Unknwon type of visualization (mimeType: "'+A(e.result.mimeType)+'", hdf5: "'+A(e.result.hdf5)+'") ',1)),U(l,{class:"annotation-container","result-uuid":e.result.uuid,selection:e.props.selection},null,8,["result-uuid","selection"]),U(u,{class:"annotation-container annotations",selection:e.props.selection,"player-width":e.playerWidth},null,8,["selection","player-width"])],64)):(T(),g("div",Ja," Unexpected behavior (result undefined) "))])},Va.__scopeId="data-v-6c642ed2";var Ya=v({name:"AnalysisTracks",components:{Axis:Gt,AnalysisTrack:Va,TrackPluginsContainer:wt,InteractivePlayCursor:St},props:{itemId:{type:String,required:!0},analysisTracks:{type:Object,required:!0},selection:{type:Object,required:!1,default:void 0},addAnnotation:{type:Boolean,required:!0}},emits:["selection"],setup(e,{emit:t}){const a=ke(),n=m();return $([()=>e.selection],(()=>{n.value=e.selection}),{immediate:!0}),$([n],(()=>{t("selection",n.value)}),{immediate:!0}),{innerSelection:n,formatResponseError:ue,lastTime:E((()=>a.state.duration)),newTrack:function(e){e.scrollIntoView({behavior:"smooth",block:"center"})}}}});f("data-v-b30e06bc");const Ka={class:"selection-tracks"},Qa={key:0,class:"loading"},Za={key:1,class:"error"},en={key:2},tn={key:3,class:"tracks"},an={class:"track-list"};y(),Ya.render=function(e,t,a,n,i,o){const r=x("AnalysisTrack"),s=x("InteractivePlayCursor"),l=x("TrackPluginsContainer"),u=x("Axis");return T(),g("div",Ka,[e.analysisTracks.loading?(T(),g("div",Qa," Loading... ")):e.analysisTracks.error?(T(),g("div",Za," An error occured getting analysis tracks: "+A(e.formatResponseError(e.analysisTracks.error)),1)):e.analysisTracks?(T(),g("div",tn,[C("div",an,[U(te,{name:"animate-track",tag:"div",onEnter:e.newTrack},{default:I((()=>[(T(!0),g(k,null,b(e.analysisTracks.analysisTracks,(a=>(T(),z(r,{key:a.uuid,start:e.selection?e.selection.start:void 0,stop:e.selection?e.selection.stop:void 0,"analysis-track":a,"add-annotation":e.addAnnotation,selection:e.selection,class:"analysis-track",onDeleted:t[0]||(t[0]=t=>e.analysisTracks.remove(t))},null,8,["start","stop","analysis-track","add-annotation","selection"])))),128))])),_:1},8,["onEnter"]),U(l,{class:"track-plugins-container"},{default:I((()=>[U(s,{selection:e.innerSelection},null,8,["selection"])])),_:1})])])):(T(),g("div",en," Unexpected behavior: analysisTracks is undefined and no API error ")),U(u,{"first-time":e.selection?e.selection.start:0,"last-time":e.selection?e.selection.stop:e.lastTime},null,8,["first-time","last-time"])])},Ya.__scopeId="data-v-b30e06bc";var nn=v({components:{Icon:_},props:{itemId:{type:String,required:!0}},emits:["new-analysis-track"],setup(e,{emit:t}){const{api:a,currentBaseUrl:n}=re(),i=m(),o=m(!0),r=m(),s=m(),l=document.querySelectorAll(".info-title"),u=[],d=[];S((async()=>{try{const e=await a.listAnalysis();i.value=e,i.value.forEach((e=>{l.forEach((t=>{t.innerHTML===e.title&&d.push(e.title)}))})),setTimeout((()=>{document.querySelectorAll(".checklist").forEach((e=>{u.push(e)})),d.forEach((e=>{u.forEach((t=>{if(t.getElementsByTagName("p")[0].innerHTML===e){t.classList.add("analysis-available");t.getElementsByClassName("analysis-icon-available")[0].classList.add("show");t.getElementsByClassName("analysis-icon-visible")[0].classList.add("show")}}))}))}),100),o.value=!1,r.value=void 0}catch(e){e instanceof Response?r.value=e:console.error("Unknown error occured",e)}}));const v=m(!1),p=m();return{analysis:i,analysisLoading:o,selectedAnalysisId:s,analysisError:r,handleAnalysisTrackVisibility:function(e){var t,a,n;const i=e.currentTarget;i.classList.remove("show");const o=null==(t=i.parentElement)?void 0:t.getElementsByClassName("analysis-selection-title")[0].innerHTML;let r;if(i.classList.contains("analysis-icon-visible")){null==(a=i.nextElementSibling)||a.classList.add("show");document.querySelectorAll(".analysis-track").forEach((e=>{e.getElementsByClassName("info-title")[0].innerHTML===o&&(r=e,r.classList.remove("show"),r.classList.add("hide"))}))}else{null==(n=i.previousElementSibling)||n.classList.add("show");document.querySelectorAll(".analysis-track").forEach((e=>{e.getElementsByClassName("info-title")[0].innerHTML===o&&(r=e,r.classList.remove("hide"),r.classList.add("show"))}))}},formatResponseError:ue,submitLoading:v,submitError:p,submit:async function(i){if(i.uuid&&!d.includes(i.title)){const r={item:c.getItemUrl(n,e.itemId),analysis:c.getAnalysisUrl(n,i.uuid)};v.value=!0;try{const e=await a.createAnalysisTrack({analysisTrack:r});if(!i)throw new Error("unexpected empty selectedAnalysis");t("new-analysis-track",e)}catch(o){p.value=o}v.value=!1}}}}});f("data-v-4342c6ee");const on={class:"list-container"},rn={key:0},sn={key:1},ln={key:2},un=["value","onClick"],cn={class:"analysis-selection-title"},dn=[C("path",{fill:"currentColor",d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},null,-1)],vn=[C("path",{fill:"currentColor",d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},null,-1)];y(),nn.render=function(e,t,a,n,i,o){const r=x("Icon");return T(),g("div",on,[e.analysisError?(T(),g("div",rn,A(e.formatResponseError(e.analysisError)),1)):P("",!0),e.analysisLoading?(T(),g("div",sn," Loading... ")):(T(),g("div",ln,[(T(!0),g(k,null,b(e.analysis,(a=>(T(),g("div",{key:a.uuid,value:a.uuid,class:"checklist",onClick:t=>e.submit(a)},[C("p",cn,A(a.title),1),U(r,{icon:"fluent:presence-available-10-filled",class:"analysis-icon analysis-icon-available"}),(T(),g("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"eye",class:"analysis-icon analysis-icon-visibility analysis-icon-visible svg-inline--fa fa-eye fa-w-18",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",onClick:t[0]||(t[0]=(...t)=>e.handleAnalysisTrackVisibility&&e.handleAnalysisTrackVisibility(...t))},dn)),(T(),g("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"eye-slash",class:"analysis-icon analysis-icon-visibility analysis-icon-hidden svg-inline--fa fa-eye-slash fa-w-20",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512",onClick:t[1]||(t[1]=(...t)=>e.handleAnalysisTrackVisibility&&e.handleAnalysisTrackVisibility(...t))},vn))],8,un)))),128))]))])},nn.__scopeId="data-v-4342c6ee";var mn=v({props:{itemId:{type:String,required:!0}},emits:["new-annotation-track","close"],setup(e,{emit:t}){const{api:a,currentBaseUrl:n}=re(),i=m(),o=m({title:"",description:"",isPublic:!1}),r=m(!1),l=m();return{form:o,formEl:i,submit:async function(){var r;const u=c.getItemUrl(n,e.itemId),d=s({item:u},o.value);try{const e=await a.createAnnotationTrack({annotationTrack:d});o.value={title:"",description:"",isPublic:!1},null==(r=i.value)||r.reset(),t("new-annotation-track",e)}catch(v){l.value=v}},error:l,loading:r,formatResponseError:ue}}});f("data-v-36792c8a");const pn={class:"field"},fn={class:"field"},yn=["disabled"],hn={key:0,class:"error"};y(),mn.render=function(e,t,a,n,i,o){return T(),g("form",{ref:"formEl",class:"create-annotation-track generic-form",onSubmit:t[3]||(t[3]=j(((...t)=>e.submit&&e.submit(...t)),["prevent"]))},[C("div",pn,[h(C("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.form.title=t),placeholder:"Title",name:"title",type:"text",required:""},null,512),[[N,e.form.title]])]),C("div",fn,[h(C("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.form.description=t),placeholder:"Description",name:"description",type:"text",required:""},null,512),[[N,e.form.description]])]),C("button",{class:"btn green-btn",disabled:e.loading},A(e.loading?"Loading...":"Add"),9,yn),C("button",{type:"button",class:"btn grey-btn",onClick:t[2]||(t[2]=t=>e.$emit("close"))}," Cancel "),e.error?(T(),g("div",hn," Error: "+A(e.formatResponseError(e.error)),1)):P("",!0)],544)},mn.__scopeId="data-v-36792c8a";var wn=v({components:{CreateAnnotationTrack:mn},props:{annotationTracks:{type:Object,required:!0},itemUuid:{type:String,required:!0}},setup(){const e=Aa();return{isAnnotationTrackFormOpen:m(!1),selectedAnnotationTrack:d(_n),annotationStore:e}}});f("data-v-8ac3f800");const gn={class:"list-container"},kn={key:0},bn=["annotation-track"],Tn=["onClick"],An={key:0,"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"pencil-alt",class:"svg-inline--fa fa-pencil-alt fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},En=[C("path",{fill:"currentColor",d:"M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"},null,-1)],Ln=["onClick"],Sn={key:0,"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"eye",class:"svg-inline--fa fa-eye fa-w-18",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"},xn=[C("path",{fill:"currentColor",d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},null,-1)],Cn={key:1,"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"eye-slash",class:"svg-inline--fa fa-eye-slash fa-w-20",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512"},Pn=[C("path",{fill:"currentColor",d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},null,-1)];function Un(e){const{api:t}=re(),a=m(),n=m(!1),i=m();return S((()=>$(e,(async()=>{await async function(){n.value=!0;try{a.value=(await t.listAnalysisTracks({itemUuid:e.value})).reverse()}catch(o){i.value=o}n.value=!1}()}),{immediate:!0}))),R({analysisTracks:a,loading:n,error:i,add:function(e){var t;a.value=null!=(t=a.value)?t:[],a.value.unshift(e)},remove:function(e){void 0!==a.value&&(a.value=a.value.filter((t=>t.uuid!==e)))}})}function In(e){const{api:t}=re(),a=m(),n=m(!1),i=m();return S((()=>$(e,(async()=>{await async function(){n.value=!0;try{a.value=(await t.listAnnotationTracks({itemUuid:e.value})).reverse()}catch(o){i.value=o}n.value=!1}()}),{immediate:!0}))),R({annotationTracks:a,loading:n,error:i,add:function(e){var t;a.value=null!=(t=a.value)?t:[],a.value.unshift(e)},remove:function(e){void 0!==a.value&&(a.value=a.value.filter((t=>t.uuid!==e)))}})}var On,Rn;y(),wn.render=function(e,t,a,n,i,o){const r=x("CreateAnnotationTrack");return T(),g("div",gn,[C("div",{class:"list-element create-annotation-track-button",onClick:t[0]||(t[0]=t=>e.isAnnotationTrackFormOpen=!e.isAnnotationTrackFormOpen)}," Create new annotation track "),e.isAnnotationTrackFormOpen?(T(),g("div",kn,[U(r,{class:"create-form","item-id":e.itemUuid,onNewAnnotationTrack:t[1]||(t[1]=t=>{e.annotationTracks.add(t),e.isAnnotationTrackFormOpen=!1}),onClose:t[2]||(t[2]=t=>e.isAnnotationTrackFormOpen=!1)},null,8,["item-id"])])):P("",!0),(T(!0),g(k,null,b(e.annotationTracks.annotationTracks,(t=>(T(),g("div",{ref:"annotationTrackRefs",key:t.uuid,class:"list-element","annotation-track":t},[C("div",{class:"selected-annotation-track",onClick:a=>e.selectedAnnotationTrack=t.uuid},[e.selectedAnnotationTrack===t.uuid?(T(),g("svg",An,En)):P("",!0)],8,Tn),C("div",{class:"selected-annotation-track",onClick:a=>e.annotationStore.toggleAnnotationTrack(t.uuid)},[e.annotationStore.annotations.has(t.uuid)?(T(),g("svg",Sn,xn)):(T(),g("svg",Cn,Pn))],8,Ln),O(" "+A(t.title),1)],8,bn)))),128))])},wn.__scopeId="data-v-8ac3f800",(Rn=On||(On={}))[Rn.Info=0]="Info",Rn[Rn.Analysis=1]="Analysis";const _n=Symbol("selectedAnnotationTrack");var Mn=v({name:"Player",components:{Audio:vt,Timer:st,MainTrack:Yt,AnalysisTracks:Ya,CreateAnalysisTrack:nn,CreateAnnotationTrackList:wn,Icon:_},props:{item:{type:Object,required:!0}},setup(e){const t=ke(),a=m();F(_n,m()),F(Ta,function(){const{api:e}=re(),t=m(new Map),a=m(),n=m(!1),i=m();async function o(a){n.value=!0;try{const n=await e.listAnnotations({trackUuid:a});t.value.set(a,n)}catch(o){i.value=o}n.value=!1}return R({annotations:t,editingAnnotation:a,fetch:o,loadingFetch:n,errorFetch:i,toggleAnnotationTrack:async function(e){t.value.has(e)?t.value.delete(e):await o(e)},addAnnotation:function(e,a){if(t.value.has(e)){let n=t.value.get(e);void 0===n?n=[a]:n.push(a),t.value.set(e,n)}},editAnnotation:function(e){if(void 0!==a.value){const n=t.value.get(a.value.annotationTrack);void 0!==n&&(n[n.indexOf(a.value.annotation)]=e,t.value.set(a.value.annotationTrack,n),a.value=void 0)}},removeEditingAnnotation:function(){if(void 0!==a.value){const e=t.value.get(a.value.annotationTrack);if(void 0!==e){const t=e.indexOf(a.value.annotation);t>-1&&e.splice(t,1),a.value=void 0}}}})}());const n=m(),i=nt(n);F(et,i);const o=E((()=>function(e){const t=e.audioUrl;if(void 0!==t&&Object.keys(t).length>0){const e=["flac","mp3"],n=[];for(const i of e){const e=`audio/${i}`,o=t[i];if(void 0===o)continue;let r;try{r=new URL(o)}catch(a){console.warn(`AudioSrc: Invalid format (${o}). Skipping...`);continue}n.push({type:e,src:r.toString()})}return n}if(null!==e.sourceFile)return[{type:void 0,src:e.sourceFile}]}(e.item))),r=E((()=>t.getters.isReady));it(a);const s=m(1);const l=m(!1),u=m(!1),c=Un(E((()=>e.item.uuid))),d=m(!1),v=In(E((()=>e.item.uuid))),p=m(!1);var f,y;f=e.item,(null==(y=document.querySelector("#header-title"))?void 0:y.getElementsByTagName("a")[0]).innerHTML=f.title;const h=m(!1);return{el:n,onSelection:e=>{a.value=e},selection:a,audioSrcs:o,audioReady:r,currentTab:s,setTab:function(e){s.value=e},Tab:On,isAdvancedPlayerOpen:l,isAnalysisTrackFormOpen:u,analysisTracks:c,isAnnotationTrackFormOpen:d,annotationTracks:v,isTechnicalInfosOpen:p,hover:h}}});f("data-v-2dbefd38");const zn={ref:"el",class:"player"},qn={class:"top-line"},Vn={class:"top-right"},Fn={key:0,class:"player-content"},Nn={ref:"advanced-player-container",class:"advanced-player-title section-title"},jn=C("h4",null,"Advanced player",-1),Bn={key:0,class:"advanced-player-container"},Dn={class:"menu"},$n={class:"line"},Hn={class:"actions"},Wn=[C("span",{class:"plus-picto"},"+",-1),O(" Analysis ")],Xn=[C("span",{class:"plus-picto"},"+",-1),O(" Annotation ")],Gn={class:"analysis-tab"},Jn={key:0,class:"create-form-container"},Yn={key:1,class:"create-form-container"},Kn={ref:"technical-informations-container",class:"technical-informations-title section-title"},Qn=C("h4",null,"Technical informations",-1),Zn={key:1,class:"technical-informations-container"},ei={class:"info-table"},ti=C("th",null,"uuid",-1),ai={key:0},ni=C("th",null,"Description",-1),ii=C("th",null,"Sample rate",-1),oi=C("th",null,"Audio duration",-1),ri={key:1};y(),Mn.render=function(e,t,a,n,i,o){const r=x("Audio"),s=x("MainTrack"),l=x("Timer"),u=x("Icon"),c=x("CreateAnalysisTrack"),d=x("CreateAnnotationTrackList"),v=x("AnalysisTracks");return T(),g("div",zn,[C("div",qn,[C("div",Vn,[e.audioSrcs?(T(),z(r,{key:0,"audio-srcs":e.audioSrcs},null,8,["audio-srcs"])):P("",!0)])]),e.audioReady?(T(),g("div",Fn,[U(s,{class:"main-track","item-id":e.item.uuid,selection:e.selection,onSelection:e.onSelection},null,8,["item-id","selection","onSelection"]),C("div",null,[U(l,{class:"timer"})]),C("div",Nn,[jn,U(u,{icon:"fad:caret-down",class:q(["icon-caret icon-caret-down",{show:!e.isAdvancedPlayerOpen}]),onClick:t[0]||(t[0]=t=>e.isAdvancedPlayerOpen=!e.isAdvancedPlayerOpen)},null,8,["class"]),U(u,{icon:"fad:caret-up",class:q(["icon-caret icon-caret-up",{show:e.isAdvancedPlayerOpen}]),onClick:t[1]||(t[1]=t=>e.isAdvancedPlayerOpen=!e.isAdvancedPlayerOpen)},null,8,["class"])],512),e.isAdvancedPlayerOpen?(T(),g("div",Bn,[C("div",Dn,[C("div",$n,[C("div",Hn,[C("button",{class:q({active:e.isAnalysisTrackFormOpen}),onClick:t[2]||(t[2]=t=>{e.isAnalysisTrackFormOpen=!e.isAnalysisTrackFormOpen,e.isAnnotationTrackFormOpen=!1})},Wn,2),C("button",{class:q({active:e.isAnnotationTrackFormOpen}),onClick:t[3]||(t[3]=t=>{e.isAnnotationTrackFormOpen=!e.isAnnotationTrackFormOpen,e.isAnalysisTrackFormOpen=!1})},Xn,2)])])]),C("div",Gn,[e.isAnalysisTrackFormOpen?(T(),g("div",Jn,[U(c,{"item-id":e.item.uuid,"analysis-tracks":e.analysisTracks,class:"create-form",onNewAnalysisTrack:t[4]||(t[4]=t=>{e.analysisTracks.add(t),e.isAnalysisTrackFormOpen=!1}),onClose:t[5]||(t[5]=t=>e.isAnalysisTrackFormOpen=!1)},null,8,["item-id","analysis-tracks"])])):P("",!0),e.isAnnotationTrackFormOpen?(T(),g("div",Yn,[U(d,{class:"annotation-track-list","annotation-tracks":e.annotationTracks,"item-uuid":e.item.uuid},null,8,["annotation-tracks","item-uuid"])])):P("",!0),U(v,{"item-id":e.item.uuid,selection:e.selection,"analysis-tracks":e.analysisTracks,"add-annotation":e.isAnnotationTrackFormOpen},null,8,["item-id","selection","analysis-tracks","add-annotation"])])])):P("",!0),C("div",Kn,[Qn,U(u,{icon:"fad:caret-down",class:q(["icon-caret icon-caret-down",{show:!e.isTechnicalInfosOpen}]),onClick:t[6]||(t[6]=t=>e.isTechnicalInfosOpen=!e.isTechnicalInfosOpen)},null,8,["class"]),U(u,{icon:"fad:caret-up",class:q(["icon-caret icon-caret-up",{show:e.isTechnicalInfosOpen}]),onClick:t[7]||(t[7]=t=>e.isTechnicalInfosOpen=!e.isTechnicalInfosOpen)},null,8,["class"])],512),e.isTechnicalInfosOpen?(T(),g("div",Zn,[C("table",ei,[C("tbody",null,[C("tr",null,[ti,C("td",null,A(e.item.uuid),1)]),e.item.description?(T(),g("tr",ai,[ni,C("td",null,A(e.item.description),1)])):P("",!0),C("tr",null,[ii,C("td",null,A(e.item.samplerate)+" Hz",1)]),C("tr",null,[oi,C("td",null,A(e.item.audioDuration)+" seconds",1)])])])])):P("",!0)])):(T(),g("div",ri," Loading audio file... "))],512)},Mn.__scopeId="data-v-2dbefd38";var si=v({name:"PlayerContainer",components:{Player:Mn,Login:Fe},props:{itemId:{type:String,required:!0}},setup(e){if(!e.itemId)throw new Error("item has no valid ID");const{api:t}=re(),a=m(),n=m(!1),i=m(),o=E((()=>{var e;return 401===(null==(e=i.value)?void 0:e.status)||!1})),r=async()=>{n.value=!0,i.value=void 0;try{a.value=await t.retrieveItem({uuid:e.itemId})}catch(o){i.value=o}finally{n.value=!1}};S((()=>r()));return{error:i,formatResponseError:ue,isLoading:n,isUnauthorized:o,item:a,onLogin:()=>{r()}}}});const li={key:0,class:"loading"},ui={key:0},ci={key:1,class:"error"},di={key:2};si.render=function(e,t,a,n,i,o){const r=x("Login"),s=x("Player");return T(),g("div",null,[e.isLoading?(T(),g("div",li," Loading... ")):(T(),g(k,{key:1},[e.isUnauthorized?(T(),g("div",ui,[U(r,{onSuccess:e.onLogin},null,8,["onSuccess"])])):e.error?(T(),g("div",ci,A(e.formatResponseError(e.error)),1)):e.item?(T(),z(s,{key:3,item:e.item},null,8,["item"])):(T(),g("div",di," Item not found "))],64))])};var vi=v({name:"ListView",components:{PlayerContainer:si}});const mi={key:0};vi.render=function(e,t,a,n,i,o){const r=x("PlayerContainer");return"string"!=typeof e.$route.params.id?(T(),g("div",mi," Unexpected $route.params.id: "+A(e.$route.params.id),1)):(T(),z(r,{key:1,"item-id":e.$route.params.id},null,8,["item-id"]))};var pi=ae({history:ne(),routes:[{path:"/",name:"app",component:Ge},{path:"/item/:id",name:"item",component:vi}]});const fi=ie(Ie);fi.use(pi),fi.provide(oe,function(e){var t;const a=function(e){return void 0!==e?[e]:["https://timeside.ircam.fr","http://localhost:9080"]}(e),n=null!=(t=null!=e?e:window.localStorage.getItem("api-url"))?t:a[0],i=new c.LocalStorageJWTToken;i.init();const o={basePath:n},r=new c.TimesideApi(new c.Configuration(o)),u=c.AutoRefreshConfiguration(o,i);return{baseUrls:a,currentBaseUrl:n,persistentToken:i,api:new c.TimesideApi(new c.Configuration(u)),rawApi:r,newAbortableApi:function(e){const t=c.AbortableFetch(e,u.fetchApi);return new c.TimesideApi(new c.Configuration(l(s({},u),{fetchApi:t})))}}}()),fi.mount("#app");
